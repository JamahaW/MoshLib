## Документация к функциям библиотеки робота МОШ (MoshLib).
### Шпаргалка по функциям
##### Функции конфигурации
- `setDistL(sensor);`, `setDistR(sensor);`, `setDistF(sensor);`: установка левого/правого/переднего датчика по умолчанию (Доступны: ir0, ir1, us)
- `setLineReg(regulator)`: установка регулятора движения по линии по умолчанию (Доступны: RELAY_L, RELAY_R, RELAY_LR, PROP)
##### Функции простого передвижения
- ДОПИШУ ПОЗЖЕ (Саша)


### Функции конфигурации

**Указывает тип левого датчика расстояния по умолчанию**
```c++
setDistL(sensor);
```
- **Параметры**:
  - `sensor`: Доступные варианты датчиков: ir0, ir1, us
- **Пример использования**:
  -  `setDistL(ir1);`: установка первого инфрокрасного датчика по умолчанию

**Указывает тип правого датчика расстояния по умолчанию**
```c++
setDistR(sensor);
```
- **Параметры**:
  - `sensor`: Доступные варианты датчиков: ir0, ir1, us
- **Пример использования**:
  -  `setDistR(ir1);`: установка первого инфрокрасного датчика по умолчанию

**Указывает тип переднего датчика расстояния по умолчанию**
```c++
setDistF(sensor);
```
- **Парамтеры**:
  - `sensor`: Доступные варианты датчиков: ir0, ir1, us
- **Пример использования**:
  -  `setDistF(ir1);`: установка первого инфрокрасного датчика по умолчанию

**Устанавливает регулятор движения по линии по умолчанию**
```c++
setLineReg(regulator);
```
- **Параметры**:
  - `regulator`: Доступные варианты регуляторов: RELAY_L, RELAY_R, RELAY_LR, PROP
- **Пример использования**:
  -  `setLineReg(PROP);`: установка пропорционального регулятора движения по линии по умолчанию

### Функции простого передвижения
**Движение с заданной скоростью на определенное время**
```c++
goTime(runtime, speed_left, speed_right);
```
- **Параметры**:
  - `runtime`: Время работы в мс.
  - `speed_left`: Скорость левого мотора.
  - `speed_right`: Скорость правого мотора.

**Вариант функции `goTime`, где используется одна скорость для обоих моторов**
```c++
goTime(runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `runtime`: Время работы в тиках.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Удерживает моторы в текущем положении на заданное время**
```c++
goHold(timeout = HOLD_STOP_TIMEOUT);
```
- **Параметры**:
  - `timeout`: Время удержания (по умолчанию `HOLD_STOP_TIMEOUT`).

**Движение на заданное количество тиков**
```c++
goTick(ticks, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `ticks`: Количество тиков.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Прямолинейное синхронное движение на заданное расстояние**
```c++
goDist(distance_mm, speed_PWM = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `distance_mm`: Заданное расстояние в миллиметрах.
  - `speed_PWM`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Синхронное движение до перекрестка**
```c++
goCross(crosses = 1, found_line = false, speed_PWMDIR = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `crosses`: Количество перекрестков (по умолчанию `1`).
  - `found_line`: Состояние найденной линии (по умолчанию `false`).
  - `speed_PWMDIR`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Поворот вокруг центра на заданный угол**
```c++
turnAngle(a, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `a`: Угол поворота (значения меньше нуля означают поворот против часовой стрелки).
  - `speed`: Скорость поворота (по умолчанию `DEFAULT_SPEED_PWM`).

**Выравнивание робота по линии**
```c++
alignLine(duration = PARAMS::ALIGN_DURATION);
```
- **Параметры**:
  - `duration`: Время выравнивания (по умолчанию `PARAMS::ALIGN_DURATION`).

**Поворот вокруг центра влево, пересекая линии**
```c++
turnLineL(crosses = 1, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `crosses`: Количество линий (по умолчанию `1`).
  - `speed`: Скорость поворота (по умолчанию `DEFAULT_SPEED_PWM`).

**Поворот вокруг центра вправо по перекресткам**
```c++
turnLineR(crosses = 1, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `crosses`: Количество линий (по умолчанию `1`).
  - `speed`: Скорость поворота (по умолчанию `DEFAULT_SPEED_PWM`).

### Функции движения до-по-вдоль стены
**Прямолинейное синхронное движение до стены**
```c++
wallFront(sensor, distance, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `sensor`: Ссылка на датчик расстояния.
  - `distance`: Целевое расстояние до стены.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Вариант функции `wallFront`, где используется передний датчик расстояния**
```c++
wallFront(distance, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `distance`: Целевое расстояние до стены.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Прямолинейное синхронное движение назад от стены**
```c++
wallBack(sensor, distance, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `sensor`: Ссылка на датчик расстояния.
  - `distance`: Расстояние, на котором должна находиться стена.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Вариант функции `wallBack`, где используется передний датчик расстояния**
```c++
wallBack(distance, speed = DEFAULT_SPEED_PWM);
```
- **Параметры**:
  - `distance`: Расстояние, на котором должна находиться стена.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_PWM`).

**Движение вдоль стены по левому датчику**
```c++
wallTimeL(distance, runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `distance`: Целевое расстояние в сантиметрах.
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Движение вдоль стены по правому датчику**
```c++
wallTimeR(distance, runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `distance`: Целевое расстояние в сантиметрах.
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

### Функции движения по линии
**Движение по линии с регулятором по умолчанию**
```c++
lineTime(runtime, speed = DEFAULT_SPEED);
```
- **Параметры**:
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED`).

**Движение по линии по левому датчику**
```c++
lineTimeL(runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Движение по линии по правому датчику**
```c++
lineTimeR(runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Движение по линии по двум датчикам**
```c++
lineTimeLR(runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Движение по линии по P-регулятору**
```c++
lineTimeP(runtime, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `runtime`: Время движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Движение по линии до перекрестка P-регулятором**
```c++
lineCrossP(crosses = 1, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `crosses`: На каком перекрёстке остановиться.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).

**Движение по линии на расстояние P-регулятором**
```c++
lineDistP(distance, speed = DEFAULT_SPEED_TICK);
```
- **Параметры**:
  - `distance`: Расстояние движения.
  - `speed`: Скорость движения (по умолчанию `DEFAULT_SPEED_TICK`).





# MoshLib

TODO обновить

## Библиотека Arduino для мобильного робота

* Управление оборудованием:
  * Моторы:
    * [x] Контроль ШИМ-Направление;
    * [x] Вращение с постоянной скоростью;
    * [x] Удержание позиции;
    * [ ] Управление ускорением;

  * УЗ-датчик:
    * [x] Определение расстояния (см);
    * [ ] Фильтр;

  * ИК-датчик:
    * [x] Определение расстояния (см);
    * [ ] Фильтр;

  * Датчик линии:
    * [x] Калибровка значений на линии и на поле;
    * [x] Логический режим, определение уровня чувствительности;
    * [x] Аналоговый режим;

  * Кнопка:
    * [ ] Поведение определяется внешней библиотекой;
    * [ ];

  * Серво:
    * [ ] Поведение определяется внешней библиотекой;
    * [ ];

  * Дисплей:
    * [ ] Поведение определяется внешней библиотекой;
    * [ ];

* Функционал:
  * Конфигурирование робота:
    * [x] Установка положений датчиков; `setDistL setDistR setDistF`
    * [ ] Установка алгоритма движения по линии по умолчанию;
    * [ ] Установка скорости движения по умолчанию;
    * [ ] Крайние углы захвата, задание скорости;
    * [ ] Крайние углы толкателя, задание скорости;

  * Управление:
    * [ ] Блокирующее ожидание нажатия кнопки;
    * [ ] Синхронное движение моторов;
    * [ ];

  * // TODO имя:
    * [ ] Захват;
    * [ ] Толкатель;

  * Простые движения:
    * [x] По времени `-Time-`;
    * [x] По тикам; `-Ticks-`
    * [x] Удержание позиции;
    * [ ];

  * Поворот:
    * [x] На угол по энкодерам; `turnAngle`
    * [ ] Поворот до линии (Направо, налево); `turnLine`
    * [ ] Выравнивание по линии `linePos`
  
  * Прямолинейное движение:
    * [x] На расстояние мм по энкодерам; `goDist`
    * [x] На время; `goTime`
    * [x] Вперёд до стены -> мм; `wallFront`
    * [x] Назад от стены -> мм; `wallBack`
    * [ ] До чёрной линии -> мм; `goCross`
    * [ ] До белой линии -> мм; `goTolineW`
    * [ ] Чтение штрихкода (определение массива длин полос данной длины); `readBars`
    * [ ] Чтение штрихкода (определение количества полос); `readBars`
    * [ ] Прямо и выравнивание по перпендикулярным линиям;
  
  * Движение вдоль стены:
    * Вид движения:
      * [x] По одному датчику (Левый или Правый); `wallL* wallR*`
      * [ ] По двум датчикам (удержание позиции по середине); `wall*`

    * Остановка:
      * [x] По времени; `*Time`
      * [ ] По расстоянию; `*Dist`
      * [ ] Пока не пропадёт из зоны видимости;
      * [ ] До фиксации линии; `*Line`
  
  * Движение по линии:
    * Реализованные регуляторы:
      * [x] Релейный по одному датчику (Левый или Правый); `line*L line*R`
      * [x] Релейный по двум датчикам; `line*LR`
      * [x] Пропорциональный; `line*P`
      * [ ] Пропорционально-Дифференциальный; `line*PD`

    * Остановка:
      * [x] По времени; `*TIme*`
      * [ ] До объекта -> мм; `*Wall`
      * [ ] По пройденому расстоянию; `*Dist*`
      * [ ] По число пройденных перекрёстков -> мм `*Cross*`

* TODO:

* BL;

* Заменить полиморфизм на указатели функций.
