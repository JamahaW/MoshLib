# MoshLib

## Библиотека Arduino для мобильного робота

* Управление оборудованием:
  * Моторы:
    * [x] Контроль ШИМ-Направление;
    * [x] Вращение с постоянной скоростью;
    * [x] Удержание позиции;
    * [ ] Управление ускорением;

  * УЗ-датчик:
    * [x] Определение расстояния (см);
    * [ ] Фильтр;

  * ИК-датчик:
    * [x] Определение расстояния (см);
    * [ ] Фильтр;

  * Датчик линии:
    * [x] Калибровка значений на линии и на поле;
    * [x] Логический режим, определение уровня чувствительности;
    * [x] Аналоговый режим;

  * Кнопка:
    * [ ] Поведение определяется внешней библиотекой;
    * [ ];

  * Серво:
    * [ ] Поведение определяется внешней библиотекой;
    * [ ];

  * Дисплей:
    * [ ] Поведение определяется внешней библиотекой;
    * [ ];

* Функционал:
  * Конфигурирование робота:
    * [x] Установка положений датчиков;
    * [ ] Установка алгоритма движения по линии по умолчанию;
    * [ ] Установка скорости движения по умолчанию;
    * [ ] Крайние углы захвата, задание скорости;
    * [ ] Крайние углы толкателя, задание скорости;

  * Управление:
    * [ ] Блокирующее ожидание нажатия кнопки;
    * [ ] Синхронное движение моторов;
    * [ ];

  * TODO имя:
    * [ ] Захват;
    * [ ] Толкатель;

  * Простые движения:
    * [x] По времени;
    * [x] По тикам;
    * [x] Удержание позиции;
    * [ ];

  * Поворот:
    * [x] На угол по энкодерам;
    * [ ] Поворот до линии (Направо, налево);
    * [ ] Выравнивание по линии;
  
  * Прямолинейное движение:
    * [x] На расстояние мм по энкодерам;
    * [x] На время;
    * [x] Вперёд до стены -> мм;
    * [x] Назад от стены -> мм;
    * [ ] До чёрной линии -> мм;
    * [ ] До белой линии -> мм;
    * [ ] Чтение штрихкода (определение массива длин полос данной длины);
    * [ ] Чтение штрихкода (определение количества полос);
    * [ ] Прямо и выравнивание по перпендикулярным линиям;
  
  * Движение вдоль стены:
    * Вид движения:
      * [x] По одному датчику (Левый или Правый);
      * [ ] По двум датчикам (удержание позиции по середине);

    * Остановка:
      * [x] По времени;
      * [ ] По расстоянию;
      * [ ] Пока не пропадёт из зоны видимости;
      * [ ] До фиксации линии;
  
  * Движение по линии:
    * Реализованные регуляторы:
      * [x] Релейный по одному датчику (Левый или Правый);
      * [x] Релейный по двум датчикам;
      * [x] Пропорциональный;
      * [ ] Пропорционально-Дифференциальный;

    * Остановка:
      * [x] По времени;
      * [ ] До объекта -> мм;
      * [ ] По пройденому расстоянию;
      * [ ] По число пройденных перекрёстков -> мм;

* TODO:

* BL;

* Заменить полиморфизм на указатели функций.
